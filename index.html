<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <title>oskarhane</title>
  <meta name="author" content="Oskar Hane">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="oskarhane"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/icons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/icons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/icons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/icons/manifest.json">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#2d89ef">
  <meta name="msapplication-TileImage" content="/icons/mstile-144x144.png">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="alternate" href="/atom.xml" title="oskarhane" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="aligncenter">
  <a href="/"><span class="icon-oh-logo-052 header-logo"></span></a>
  <h1><a href="/">oskarhane</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-11-27T13:17:37.000Z"><a href="/functional-programming-in-javascript-the-basics/">2015-11-27</a></time>
      
      
  
    <h1 class="title"><a href="/functional-programming-in-javascript-the-basics/">Functional programming in Javascript: The basics</a></h1>
  

    </header>
    <div class="entry">
      
        <p>This post will be an intro to the very basics of functional programming style. Before I begin, let’s defins what I mean by <code>functional</code>.  </p>
<p>Functional programming is a paradigm, style, just like object oriented programming is.<br>There are two differences you must understand if you’re coming from a OO background.</p>
<p><strong>Composition over inheritance</strong>: In functional programming there’s no inheritance. Objects and functions are composed to become what you want.</p>
<p><strong>Functions must be pure / have no side effects</strong>: A function should never mutate / change the value of anything outside it’s own scope. It must always leave it untouced so that calling the function has no side effects in our app and we should always expect the same result if we call it multiple times.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="string">'Hello'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pureReverseString</span><span class="params">(s)</span> &#123;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">s</span>.<span class="built_in">split</span>(<span class="string">''</span>).<span class="built_in">reverse</span>().<span class="built_in">join</span>(<span class="string">''</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unPureReverseString</span><span class="params">(s)</span> &#123;</span></span><br><span class="line">  myVar = <span class="keyword">s</span>.<span class="built_in">split</span>(<span class="string">''</span>).<span class="built_in">reverse</span>().<span class="built_in">join</span>(<span class="string">''</span>)</span><br><span class="line">  <span class="keyword">return</span> myVar</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const rev1 = pureReverseString(myVar)</span><br><span class="line">console.<span class="built_in">log</span>(myVar, rev1) // Outputs <span class="string">'Hello'</span> <span class="string">'olleH'</span></span><br><span class="line">const rev11 = pureReverseString(myVar)</span><br><span class="line">console.<span class="built_in">log</span>(myVar, rev11) // Outputs <span class="string">'Hello'</span> <span class="string">'olleH'</span></span><br><span class="line"></span><br><span class="line">const rev2 = unPureReverseString(myVar)</span><br><span class="line">console.<span class="built_in">log</span>(myVar, rev2) // Outputs <span class="string">'olleH'</span> <span class="string">'olleH'</span></span><br><span class="line">const rev21 = unPureReverseString(myVar)</span><br><span class="line">console.<span class="built_in">log</span>(myVar, rev21) // Outputs <span class="string">'Hello'</span> <span class="string">'Hello'</span></span><br></pre></td></tr></table></figure>
<p>Quite silly example, but we clearly see that the second function mutates the <code>myVar</code> variable which could have side effects on our app. And also, when calling it multiple times with the same input variable we get different results.<br>Hard to test and debug.</p>
<p>This is the basics.</p>
<p>Functional programming also uses something called <em>curried functions</em> or just <em>currying</em>. This is a quite cool and handy way of composing functions that can be used later over and over again.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Let's say we have a simple add function that adds two integers</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(x,y)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is the curried function</span></span><br><span class="line"><span class="comment">// You can call the curried function by addCurried(1)(2) to add 1+2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCurried</span><span class="params">(what)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> what+num</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addFive = addCurried(<span class="number">5</span>) <span class="comment">// Partial curried function</span></span><br><span class="line"><span class="keyword">const</span> addThree = addCurried(<span class="number">3</span>) <span class="comment">// Partial curried function</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addFive(<span class="number">4</span>)) <span class="comment">// Outputs 9</span></span><br><span class="line"><span class="built_in">console</span>.log(addFive(<span class="number">4</span>)) <span class="comment">// Outputs 9</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addThree(<span class="number">4</span>)) <span class="comment">// Outputs 7</span></span><br><span class="line"><span class="built_in">console</span>.log(addThree(<span class="number">4</span>)) <span class="comment">// Outputs 7</span></span><br></pre></td></tr></table></figure>
<p>Again, not super useful example but consider a role play where <code>addFive</code> could be something like <code>swordHit</code> and <code>addThree</code> might be <code>knifeHit</code>.</p>
<p>I’ll continue exploring functional programming in Javascript more in depth in future posts.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-18T19:58:25.000Z"><a href="/Throttle-function-calls/">2015-06-18</a></time>
      
      
  
    <h1 class="title"><a href="/Throttle-function-calls/">Throttle function calls</a></h1>
  

    </header>
    <div class="entry">
      
        <p>A throttle function is a function that limit the number of calls to 1 per x time units.<br>I recently wanted to capture the <code>mousemove</code> event and reset a timer when the mouse was moved. Since the <code>mousemove</code> event is triggered several times per second I don’t want my reset function to be called every time. It would be fine for my reset function to be called once every 5 seconds or something like that.<br>Resetting a timer is quite cheap, but if I wanted to do something expensive the app would be very sluggish doing these expensive operations too often.</p>
<p>So I came up with this function, written in Coffeescript.</p>
<pre><code><span class="function"><span class="title">throttle</span> = <span class="params">(func, wait)</span> -&gt;</span>
  last_timestamp = <span class="literal">null</span>
  limit = wait<span class="function">
  -&gt;</span>
    context = @
    args = arguments
    now = Date.now()
    <span class="keyword">if</span> !last_timestamp || now - last_timestamp &gt;= limit
      last_timestamp = now
      func.apply(context, args)

mythrottle = throttle(
  <span class="function"><span class="params">(e)</span> -&gt;</span>
    <span class="built_in">console</span>.log e
,
  <span class="number">5000</span>
)

elem.bind<span class="function"><span class="params">(<span class="string">'mousemove'</span>, (e)-&gt;
  mythrottle(e)
)</span></span>
</code></pre><p>And in Javascript.</p>
<pre><code><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span><span class="params">(func, wait)</span> </span>{
  <span class="keyword">var</span> last_timestamp, limit;
  last_timestamp = <span class="literal">null</span>;
  limit = wait;
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    <span class="keyword">var</span> args, context, now;
    context = <span class="keyword">this</span>;
    args = <span class="built_in">arguments</span>;
    now = <span class="built_in">Date</span>.now();
    <span class="keyword">if</span> (!last_timestamp || now - last_timestamp &gt;= limit) {
      last_timestamp = now;
      <span class="keyword">return</span> func.apply(context, args);
    }
  };
};

<span class="keyword">var</span> mythrottle = throttle(<span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>{
  <span class="keyword">return</span> <span class="built_in">console</span>.log(e);
}, <span class="number">5000</span>);

elem.bind(<span class="string">'mousemove'</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>{
  <span class="keyword">return</span> mythrottle(e);
});    
</code></pre><p><code>elem</code> is the selected element, like <code>$(&#39;#id&#39;)</code> in jQuery.</p>
<p>We’re calling <code>mythrottle(e)</code> every 5 seconds on constant mousemove now, instead of several times every second.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-06-03T20:36:16.000Z"><a href="/writing-the-book-build-your-own-paas-with-docker/">2015-06-03</a></time>
      
      
  
    <h1 class="title"><a href="/writing-the-book-build-your-own-paas-with-docker/">Writing the book: Build your own PaaS with Docker</a></h1>
  

    </header>
    <div class="entry">
      
        <p>So, I’ve written a book. A real book that’s sold on Amazon (amongst other stores). Printed on paper (or as an ebook as well, of course).</p>
<p>It was a lot harder than I thought.<br>Getting the language right (since I’m not a native english speaker) and getting a good flow within every chapter as well as through the whole book.<br>Authoring chapters that will give readers insights and knowledge. It’s hard.</p>
<p>It took much longer than I thought. I’d just started working for <a href="http://neo4j.com" target="_blank" rel="external">Neo4j</a> and had 2,5 years old daughter that wanted attention all awake time.<br>So there were lots of late night writing done. Lots. Days before some deadlines I hardly didn’t sleep at all.</p>
<p>The book is about how you can use <a href="http://docker.com" target="_blank" rel="external">Docker</a> to build your own Platform as a Service. Docker is still pretty young and breaking changes come pretty often which had the effect that I had to rewrite parts of the book from time to time to reflect these Docker changes.<br>And I wrote about <a href="http://www.fig.sh" target="_blank" rel="external">Fig</a> and they get acquired by Docker, changing it’s name to <a href="https://docs.docker.com/compose/" target="_blank" rel="external">Docker Compose</a> so I had to rewrite that part as well. You get the idea.</p>
<p>It’s published by <a href="https://www.packtpub.com" target="_blank" rel="external">PACKT Publishing</a>, which is a brittish publishing company founded in 2004.</p>
<p>If was a fun and educating experice and I wouldn’t mind writing another book. Not right now, but in the near future.<br>But I would choose a more stable topic and probably not have such short deadlines (I would write on my terms).</p>
<p>I’m super exited that I’ve written a book and can call myself an author / published writer.<br>I’m also very self critical and find things I’m not happy with through out the whole book. On the other hand, the book would never have been published if I was to be happy with every sentence in it.</p>
<p>The book is called <strong>Build your own PaaS with Docker</strong> and can be found on <a href="http://www.amazon.com/gp/product/1784393940" target="_blank" rel="external">Amazon</a> and in <a href="http://bit.ly/1J9j3ix" target="_blank" rel="external">Packts webshop</a>.<br>Check it out.</p>
<p><img src="/post_img/2015/06/3496OT.jpg.png" alt="Cover"></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-26T15:38:21.000Z"><a href="/offline-mode-in-os-x/">2015-05-26</a></time>
      
      
  
    <h1 class="title"><a href="/offline-mode-in-os-x/">Offline mode in OS X</a></h1>
  

    </header>
    <div class="entry">
      
        <p>When working on web apps we have to keep in mind that the client might not have access to the internet all the time.  Chrome has a great feature for this:<br><img src="/post_img/2015/05/Oskar4j-2015-05-26-at-17.20.02.png" alt="Chrome network settings"></p>
<p>When working on a web app that make requests to a API located at <em>localhost</em> but also make requests to external API:s, it’s harder.<br>I solved this issue by creating a new <em>Location</em> in OS X <em>Network</em> part of <em>System Preferences</em>. The new <em>Location</em> has WiFi and Ethernet <em>Configure IPv4</em> set to <em>Off</em>, which means that it’s offline but you can still reach your localhost server.</p>
<p><img src="/post_img/2015/05/Oskar4j-2015-05-26-at-17.30.43.png" alt="OS X Network Location"></p>
<p>Good times!</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-04-22T21:05:32.000Z"><a href="/untracked-files-in-newly-cloned-git-repo/">2015-04-22</a></time>
      
      
  
    <h1 class="title"><a href="/untracked-files-in-newly-cloned-git-repo/">Untracked files in newly cloned Git repo?</a></h1>
  

    </header>
    <div class="entry">
      
        <p>It has happend a few times for me: I clone a remote Git repository, and when I do <code>git status</code> to see info one or more untracked files are listed.<br>It’s quite annoying and I could see the pattern that the filenames of these files has UTF-8 / special characters in them (åäö). </p>
<p>What to do to resolve this?</p>
<p>Do this: <code>git config core.precomposeunicode false</code> and they’re tracked.</p>
<p>Why? </p>
<p><strong>core.precomposeunicode</strong></p>
<pre><code>This <span class="keyword">option</span> <span class="keyword">is</span> only used <span class="keyword">by</span> Mac OS implementation <span class="keyword">of</span> Git. <span class="keyword">When</span> core.precomposeunicode=<span class="literal">true</span>, 
Git reverts the <span class="keyword">unicode</span> decomposition <span class="keyword">of</span> filenames done <span class="keyword">by</span> Mac OS. 
This <span class="keyword">is</span> useful <span class="keyword">when</span> sharing a repository between Mac OS <span class="keyword">and</span> Linux <span class="keyword">or</span> Windows. 
(Git <span class="keyword">for</span> Windows <span class="number">1.7</span><span class="number">.10</span> <span class="keyword">or</span> higher <span class="keyword">is</span> needed, <span class="keyword">or</span> Git under cygwin <span class="number">1.7</span>). 
<span class="keyword">When</span> <span class="literal">false</span>, file names are handled fully transparent <span class="keyword">by</span> Git, which <span class="keyword">is</span> backward compatible <span class="keyword">with</span> 
older versions <span class="keyword">of</span> Git.
</code></pre><p>From <a href="http://git-scm.com/docs/git-config" target="_blank" rel="external">http://git-scm.com/docs/git-config</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-03-25T20:56:54.000Z"><a href="/git-feature-branch-model/">2015-03-25</a></time>
      
      
  
    <h1 class="title"><a href="/git-feature-branch-model/">Git - Feature branch model</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Whether you use Git with a centralized repository (like Github or Bitbucket) or just a local copy, I would always advice you to use the <em>Feature branch model</em> as your Git workflow.</p>
<p>Here are the key points that describes the Git feature branch workflow:</p>
<ul>
<li>No development happens or are pushed directly to the master branch.</li>
<li>Create a new branch, a feature branch, when you start development on a new feature.</li>
<li>Feature branches should have descriptive names, like <code>add-printing-stylesheet</code>.</li>
<li>When the feature is finished, you merge in into master or create a pull request if you use a central repository and use pull requests / code review.</li>
<li>When it’s merged, delete the feature branch. Keep the branches as short lived as possible.</li>
</ul>
<p>If you follow this you will always have a working master branch and all feature development is isolated from the main codebase until they are finished.  </p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-11-12T20:08:20.000Z"><a href="/angular-bootstrap-jade-stylus-coffeescript-boilerplate-webapp-with-yeoman/">2014-11-12</a></time>
      
      
  
    <h1 class="title"><a href="/angular-bootstrap-jade-stylus-coffeescript-boilerplate-webapp-with-yeoman/">Angular - Bootstrap - Jade - Stylus - CoffeeScript boilerplate webapp with Yeoman</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Sorry about all the buzzwords in the title but it really describes what this note-to-self post is about.  </p>
<p>How to create a boilerplate web app using <a href="https://angularjs.org" target="_blank" rel="external">AngularJS</a> as framework, <a href="http://getbootstrap.com" target="_blank" rel="external">Bootstrap</a> as HTML/CSS base, <a href="http://jade-lang.com" target="_blank" rel="external">Jade</a> as HTML replacement, <a href="http://learnboost.github.io/stylus/" target="_blank" rel="external">Stylus</a> as CSS replacement, and <a href="http://coffeescript.org" target="_blank" rel="external">CoffeeScript</a> as a Javascript replacement/generator/transpiler. All using <a href="http://gruntjs.com" target="_blank" rel="external">Grunt</a> as the glue that keeps everything together.  </p>
<p><a href="https://www.npmjs.org" target="_blank" rel="external">Npm</a> and <a href="http://bower.io" target="_blank" rel="external">Bower</a> makes sure all dependencies are in place. And Karma for the testing.</p>
<p>To create the scaffolding I use a tool named <a href="http://yeoman.io" target="_blank" rel="external">Yeoman</a> that has all these <em>generators</em> that installs all tolls you need, configures Grunt, npm and Bower and generates a basic app file structure so you can jump straight into the code.</p>
<p>Lots of tools and replacements/generators/transpiler languages and there certainly are better or faster ones out there, but these makes me comfortable and I can get to work in 2 min.</p>
<p>Anyway, this is how I do it:</p>
<pre><code>npm install --<span class="keyword">global</span> yo bower grunt-<span class="keyword">cli</span>
npm install --<span class="keyword">global</span> generator-angular-jade-stylus

<span class="keyword">mkdir</span> newapp &amp;&amp; <span class="keyword">cd</span> <span class="label">$_</span>
yo angular-jade-stylus --coffee --jade --stylus newapp
</code></pre><p>Run <code>npm cache clean</code> and repeat the last line if it fails.  </p>
<p>Answer yes to all questions.</p>
<p>Run <code>grunt serve</code> and point your browser to localhost:9000 unless it does so for you.</p>
<p>Bam, done.  </p>
<p>Thank you <a href="http://yeoman.io" target="_blank" rel="external">Yeoman</a>.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-11-07T14:17:37.000Z"><a href="/again-add-authorization-header-to-angularjs-http/">2014-11-07</a></time>
      
      
  
    <h1 class="title"><a href="/again-add-authorization-header-to-angularjs-http/">Again: Add Authorization header to AngularJS $http</a></h1>
  

    </header>
    <div class="entry">
      
        <p>In my last post I showed <a href="/add-authorization-header-to-angularjs-http/">how I add an <code>Authorization</code> header</a> to outgoing $http calls in AngularJS. I’ve changed the way I do it, this which I think is easier to read.</p>
<pre><code>angular.<span class="function"><span class="title">module</span><span class="params">(<span class="string">'app'</span>)</span></span>
  .factory(<span class="string">'RequestInterceptor'</span>, [
    <span class="string">'AuthDataService'</span>
    (AuthDataService) -&gt;
      interceptor = 
        request: (config) -&gt;
          <span class="tag">header</span> = AuthDataService.<span class="function"><span class="title">getAuthData</span><span class="params">()</span></span>
          <span class="keyword">if</span> <span class="tag">header</span> then config<span class="class">.headers</span>[<span class="string">'Authorization'</span>] = <span class="string">"Basic #{header}"</span>
          config
      interceptor
])

angular.<span class="function"><span class="title">module</span><span class="params">(<span class="string">'app'</span>)</span></span>.<span class="function"><span class="title">config</span><span class="params">([<span class="string">'$httpProvider'</span>, (<span class="variable">$httpProvider</span>)</span></span> -&gt;
  <span class="variable">$httpProvider</span><span class="class">.interceptors</span><span class="class">.push</span> <span class="string">'RequestInterceptor'</span>
])
</code></pre><p>The <code>AuthDataService</code> is the same as in my last post, but without the the setting of <code>$http.defaults.headers.common[&#39;Authorization&#39;]</code>.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-10-14T11:40:46.000Z"><a href="/add-authorization-header-to-angularjs-http/">2014-10-14</a></time>
      
      
  
    <h1 class="title"><a href="/add-authorization-header-to-angularjs-http/">Add Authorization header to AngularJS $http</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I recently had to add an <a href="http://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="external">Authorization header</a> to all <a href="https://docs.angularjs.org/api/ng/service/$http" target="_blank" rel="external">$http</a> requests in an AngularJS app.  </p>
<p>Here’s how I did it in Coffeescript.</p>
<pre><code><span class="comment">#AuthData.coffee</span>

angular.<span class="keyword">module</span>(<span class="string">'app'</span>)
.factory <span class="string">'AuthDataService'</span>, [
  <span class="string">'localStorageService'</span>
  <span class="string">'$base64'</span>
  <span class="string">'$http'</span>
  (localStorageService, <span class="variable">$base64</span>, <span class="variable">$http</span>) -&gt;
    current_auth_data = localStorageService.get(<span class="string">'authorization_token'</span>)
    if current_auth_data
      <span class="variable">$http</span>.defaults.headers.common[<span class="string">'Authorization'</span>] = <span class="string">"Basic <span class="subst">#{current_auth_data}</span>"</span>

    <span class="keyword">return</span> {
      <span class="symbol">setAuthData:</span> (authdata) -&gt;
        <span class="keyword">return</span> <span class="keyword">unless</span> authdata
        encoded = <span class="variable">$base64</span>.encode(authdata)
        localStorageService.set(<span class="string">'authorization_token'</span>, encoded)
        <span class="variable">$http</span>.defaults.headers.common[<span class="string">'Authorization'</span>] = <span class="string">"Basic <span class="subst">#{encoded}</span>"</span>
      <span class="symbol">clearAuthData:</span> -&gt;
        localStorageService.remove(<span class="string">'authorization_token'</span>)
        <span class="variable">$http</span>.defaults.headers.common[<span class="string">'Authorization'</span>] = <span class="string">''</span>
      <span class="symbol">getAuthData:</span> -&gt;
        <span class="keyword">return</span> localStorageService.get(<span class="string">'authorization_token'</span>)
    }
]
</code></pre><p>Upon initialization it checks if there’s a <code>authorization_token</code> saved in your local storage. If there is, set it as a <code>Authorization</code> header on $http.  </p>
<p>Whenever you set or clear the auth data, the header for $http changes as well.</p>
<p>EDIT: I’ve written another post about how to <a href="/again-add-authorization-header-to-angularjs-http/">add Authorization header to AngularJS $http</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-09-24T03:56:28.000Z"><a href="/create-a-nested-array-recursively-in-coffeescript/">2014-09-24</a></time>
      
      
  
    <h1 class="title"><a href="/create-a-nested-array-recursively-in-coffeescript/">Create a nested array recursively in CoffeeScript</a></h1>
  

    </header>
    <div class="entry">
      
        <p>In an old post called <a href="/create-a-nested-array-recursively-in-javascript/">Create a nested array recursively in Javascript</a> I wrote how to go from</p>
<pre><code>[
    {<span class="string">id:</span> <span class="number">1</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">0</span>},
    {<span class="string">id:</span> <span class="number">2</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">0</span>},
    {<span class="string">id:</span> <span class="number">3</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">1</span>},
    {<span class="string">id:</span> <span class="number">4</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">3</span>},
    {<span class="string">id:</span> <span class="number">5</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">4</span>},
    {<span class="string">id:</span> <span class="number">6</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">4</span>},
    {<span class="string">id:</span> <span class="number">7</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">3</span>},
    {<span class="string">id:</span> <span class="number">8</span>, <span class="string">title:</span> <span class="string">'hello'</span>, <span class="string">parent:</span> <span class="number">2</span>}
]
</code></pre>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/create-a-nested-array-recursively-in-coffeescript/#more" class="more-link">Read More &gt;&gt;</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-09-11T03:55:00.000Z"><a href="/angularjs-watch-and-timeout/">2014-09-11</a></time>
      
      
  
    <h1 class="title"><a href="/angularjs-watch-and-timeout/">AngularJS: $watch and $timeout</a></h1>
  

    </header>
    <div class="entry">
      
        <p>As you might know, AngularJS has an event loop, called $digest, that checks and updates all bindings and values.  </p>
<p>You can have a DOM element only show when a scope variable has a certain value, like this:</p>
<pre><code>&lt;<span class="keyword">div</span> ng-show=<span class="string">"show_div"</span>&gt;Text <span class="keyword">in</span> <span class="keyword">div</span>&lt;/<span class="keyword">div</span>&gt;
</code></pre><p>Whenever the $digest runs, it checks if <code>$scope.show_div</code> is true and if it is, the div is shown. If not true, the div is hidden.</p>
<p>That means that in your controller you can toggle the visibility of the div by simply setting <code>$scope.show_div = true/false</code>. However, if you do this on mouseover an element or change the value very frequently some other way the $digest might not have had the time to finish it’s loop and the div won’t toggle as it should.</p>
<p>That’s where <code>$timeout</code> comes in. It’s a wrapper for javascript’s <code>setTimeout</code> with the addition that it triggers a $digest loop at the end meaning that anything you changed will be updated as it should.  </p>
<p>So instead of <code>$scope.show_div = true</code> and then <code>$scope.show_div = false</code> you do:</p>
<pre><code><span class="variable">$timeout</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ <span class="variable">$scope</span>.show_div = <span class="keyword">true</span>; }, <span class="number">0</span>);
<span class="comment">//and</span>
<span class="variable">$timeout</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ <span class="variable">$scope</span>.show_div = <span class="keyword">false</span>; }, <span class="number">0</span>);
</code></pre>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-08T11:08:41.000Z"><a href="/neo4j-docker-image/">2014-08-08</a></time>
      
      
  
    <h1 class="title"><a href="/neo4j-docker-image/">Neo4j Docker Image</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I forked <a href="https://github.com/tpires/neo4j" target="_blank" rel="external">tpires/neo4j</a> to make a Docker image for Neo4j that has version tags so I very easily can start a Neo4j instance to make API calls to.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-03T13:30:04.000Z"><a href="/two-factor-auth-for-wordpress-5000-downloads/">2014-08-03</a></time>
      
      
  
    <h1 class="title"><a href="/two-factor-auth-for-wordpress-5000-downloads/">Two Factor Auth for Wordpress &gt; 5000 downloads</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Wow, this is pretty cool, I just passed the 5000 downloaded mark for my <a href="http://wordpress.org/plugins/two-factor-auth/" target="_blank" rel="external">Two Factor Auth for Wordpress plugin</a>.</p>
<p>(but I see that there’s something wrong with the changelog for v4.4. I really don’t like WP Plugin repository and readme parsing. This is not the first time.)</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-08-01T07:51:39.000Z"><a href="/today-im-joining-the-neo4j-team/">2014-08-01</a></time>
      
      
  
    <h1 class="title"><a href="/today-im-joining-the-neo4j-team/">Today I&#39;m joining the Neo4j team!</a></h1>
  

    </header>
    <div class="entry">
      
        <p>As of today I start working with the team @ <a href="http://www.neotechnology.com" target="_blank" rel="external">Neo Technology</a> on a part of their <a href="http://neo4j.com" target="_blank" rel="external">Graph Database Neo4j</a>.</p>
<p>I’ll be responsible to make their fantastic <a href="http://www.neo4j.org/develop/visualize" target="_blank" rel="external">Neo4j Browser</a> even better by adding more features and make it what the customers want.</p>
<p><img src="/post_img/2014/08/orreMBA-2014-08-01-kl.-11.47.12.png" alt="browser example"></p>
<p>This will be great!</p>
<p><code>(graphs)-[:ARE]-&gt;(everywhere)</code></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-29T11:12:45.000Z"><a href="/note-to-self-on-updating-wordpress-plugins-via-git-svn/">2014-07-29</a></time>
      
      
  
    <h1 class="title"><a href="/note-to-self-on-updating-wordpress-plugins-via-git-svn/">Note to self on updating Wordpress plugins via git-svn</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I host my <a href="http://wordpress.org/plugins/two-factor-auth/" target="_blank" rel="external">Two Factor Auth Wordpress Plugin</a> on <a href="https://github.com/oskarhane/wp-two-factor-auth" target="_blank" rel="external">Github</a> and I run <a href="https://www.kernel.org/pub/software/scm/git/docs/git-svn.html" target="_blank" rel="external">git svn</a> locally to be able to sync the Github git repo with the Wordpress plugins SVN repo.</p>
<p>But, it’s a bit of a hassle and I don’t update the plugin often enough to remember what step to take.</p>
<p>The assumption is that you’ve followed <a href="https://gist.github.com/kasparsd/3749872" target="_blank" rel="external">this guide</a> to setup you local repo with svn and git remotes.</p>
<h2 id="1">1</h2><p>Write code in local git feature branches as usual. Push the finished code to Githubs master branch and add a git tag.</p>
<h2 id="2">2</h2><p>Create a new local git branch (or use a clean old one) and merge local master branch (remember to squash all commits!) into this one. It has to have a straight history.</p>
<h2 id="3">3</h2><p>Run <code>git svn rebase</code> the see that the history matches with the remote Worpress svn repo.</p>
<h2 id="4">4</h2><p>Run <code>git svn dcommit --username yourusername</code> to push the code to Wordpress svn repo. Remember that you have to change all the tags in your readme.txt and you main plugin file to match the new release version.</p>
<h2 id="5">5</h2><p>Run <code>git svn tag x.x</code> to copy trunk and create a new remote tag/release from it.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="widget tag">
  <img width="100%" height="auto" src="/post_img/2013/02/4f339050f44c11e1a3461231381315e1_7.jpg">
    <h3 class="title"> MY LIFE CONSISTS OF…</h3>
      <p class="entry">
        ... coding, family, humor, and general whining about stuff that's not done right.
        <br>
        I'm an introvert (<a href="http://www.typelogic.com/intp.html">INTP</a>) who loves to program, build stuff, and solve problems.
        <br>Works @ <a href="http://neo4j.com/">Neo4j</a>.
        <br>I can be reached at <a href="http://twitter.com/oskarhane">@oskarhane</a>, &nbsp; <a href="http://www.facebook.com/ohane">ohane</a>
        &nbsp; and &nbsp;
        <a href="mailto:blog@oskarhane.com">blog@oskarhane.com</a>.
      </p>
</div>

  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/functional-programming-in-javascript-the-basics/">Functional programming in Javascript: The basics</a>
      </li>
    
      <li>
        <a href="/Throttle-function-calls/">Throttle function calls</a>
      </li>
    
      <li>
        <a href="/writing-the-book-build-your-own-paas-with-docker/">Writing the book: Build your own PaaS with Docker</a>
      </li>
    
      <li>
        <a href="/offline-mode-in-os-x/">Offline mode in OS X</a>
      </li>
    
      <li>
        <a href="/untracked-files-in-newly-cloned-git-repo/">Untracked files in newly cloned Git repo?</a>
      </li>
    
      <li>
        <a href="/git-feature-branch-model/">Git - Feature branch model</a>
      </li>
    
      <li>
        <a href="/angular-bootstrap-jade-stylus-coffeescript-boilerplate-webapp-with-yeoman/">Angular - Bootstrap - Jade - Stylus - CoffeeScript boilerplate webapp with Yeoman</a>
      </li>
    
      <li>
        <a href="/again-add-authorization-header-to-angularjs-http/">Again: Add Authorization header to AngularJS $http</a>
      </li>
    
      <li>
        <a href="/add-authorization-header-to-angularjs-http/">Add Authorization header to AngularJS $http</a>
      </li>
    
      <li>
        <a href="/create-a-nested-array-recursively-in-coffeescript/">Create a nested array recursively in CoffeeScript</a>
      </li>
    
      <li>
        <a href="/angularjs-watch-and-timeout/">AngularJS: $watch and $timeout</a>
      </li>
    
      <li>
        <a href="/neo4j-docker-image/">Neo4j Docker Image</a>
      </li>
    
      <li>
        <a href="/two-factor-auth-for-wordpress-5000-downloads/">Two Factor Auth for Wordpress &gt; 5000 downloads</a>
      </li>
    
      <li>
        <a href="/today-im-joining-the-neo4j-team/">Today I&#39;m joining the Neo4j team!</a>
      </li>
    
      <li>
        <a href="/note-to-self-on-updating-wordpress-plugins-via-git-svn/">Note to self on updating Wordpress plugins via git-svn</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/BitCoin/">BitCoin</a><small>2</small></li>
  
    <li><a href="/tags/Client-Side/">Client Side</a><small>37</small></li>
  
    <li><a href="/tags/Coding/">Coding</a><small>54</small></li>
  
    <li><a href="/tags/Crypto/">Crypto</a><small>11</small></li>
  
    <li><a href="/tags/Docker/">Docker</a><small>4</small></li>
  
    <li><a href="/tags/Food/">Food</a><small>2</small></li>
  
    <li><a href="/tags/Functional-programming/">Functional programming</a><small>1</small></li>
  
    <li><a href="/tags/General/">General</a><small>21</small></li>
  
    <li><a href="/tags/Git/">Git</a><small>2</small></li>
  
    <li><a href="/tags/Hacks/">Hacks</a><small>17</small></li>
  
    <li><a href="/tags/Humor/">Humor</a><small>5</small></li>
  
    <li><a href="/tags/Impressive/">Impressive</a><small>13</small></li>
  
    <li><a href="/tags/Javascript/">Javascript</a><small>1</small></li>
  
    <li><a href="/tags/Node-js/">Node.js</a><small>11</small></li>
  
    <li><a href="/tags/PHP/">PHP</a><small>5</small></li>
  
    <li><a href="/tags/Raspberry-Pi/">Raspberry Pi</a><small>5</small></li>
  
    <li><a href="/tags/Server-Side/">Server Side</a><small>59</small></li>
  
    <li><a href="/tags/Training/">Training</a><small>7</small></li>
  
    <li><a href="/tags/Whine/">Whine</a><small>6</small></li>
  
    <li><a href="/tags/WordPress/">WordPress</a><small>17</small></li>
  
    <li><a href="/tags/coffeescript/">coffeescript</a><small>1</small></li>
  
    <li><a href="/tags/docker/">docker</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>1</small></li>
  
    <li><a href="/tags/paas/">paas</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'oskarhane';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//piwik.hanehub.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.hanehub.com/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

</body>
</html>